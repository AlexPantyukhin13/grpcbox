{erl_opts, [debug_info]}.

{deps, [{chatterbox, {git, "https://github.com/tsloughter/chatterbox", {branch, "client-cb"}}},
        {ctx, {git, "https://github.com/tsloughter/ctx", {branch, "master"}}},
        {opencensus, {git, "https://github.com/census-instrumentation/opencensus-erlang", {branch, "master"}}},
        acceptor_pool,
        gproc,
        recon,
        grpc_lib]}.

{profiles,
 [{test, [{erl_opts, [nowarn_export_all]},

          {shell, [{config, "config/test.config"}]},

          {grpc, [{protos, "test/grpcbox_SUITE_data"},
                  {out_dir, "test"},
                  {gpb_opts, [{o, "test"},
                              {module_name_suffix, "_pb"}]}]},

          {deps, [jsx]}]},

  {interop, [{grpc, [{protos, "interop/proto"},
                     {out_dir, "interop/src"},
                     {gpb_opts, [{o, "interop/src"},
                                 {module_name_suffix, "_pb"}]}]},

             {src_dirs, ["src", "interop/"]},

             {shell, [{apps, [grpcbox]},
                      {config, "interop/config/sys.config"}]}]}
 ]}.

{shell, [{apps, [grpcbox]}]}.

{xref_checks, [undefined_function_calls, undefined_functions,
               deprecated_function_calls, deprecated_functions]}.

{project_plugins, [{rebar_covertool, "1.2.0"},
                   {grpcbox_plugin, {git, "https://github.com/tsloughter/grpcbox_plugin", {branch, "master"}}},
                   rebar3_lint]}.

{cover_enabled, true}.
{cover_opts, [verbose]}.
{cover_export_enabled, true}.
{covertool, [{coverdata_files, ["ct.coverdata"]}]}.

{ct_opts, [{ct_hooks, [cth_surefire]}]}.
